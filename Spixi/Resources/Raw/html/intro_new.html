<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/spixi-login.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
</head>
<body class="body">
    <div id="wrap">
        <div class="screen-area create-1" id="step1">
            <section class="top-area wf-section">
                <div class="logo-title steps">
                    <a href="ixian:back">
                        <img src="img/vectors-wrapper_2.svg" loading="lazy" width="24" height="24" alt="" class="vectors-wrapper-7">
                    </a>
                    <div class="spixi-logo">
                        <img src="img/vectors-wrapper.svg" loading="lazy" width="45" height="56" alt="" class="vectors-wrapper">
                        <div class="title-logo">Spixi</div>
                    </div>
                </div>
                <div class="step-top">
                    <div class="step-id step-2">
                        <div class="caption-03">*SL{intro-step-1}</div>
                    </div>
                </div>
            </section>
            <section class="mid-area wf-section">
                <div class="headline-container">
                    <div class="headline">*SL{intro-new-description-1}</div>
                </div>
                <div class="input-group">
                    <div class="subtitle">*SL{intro-new-description-2}</div>
                    <div class="inputs-password w-form">
                        <input type="text" class="input-master w-input" autofocus="true" maxlength="256" placeholder="*SL{intro-new-name-placeholder}" id="nicknameInput" oninput="onCheckStep1()">
                    </div>
                    <div class="input-avatar">
                        <img id="avatar" class="avatar" src="" />

                    </div>
                </div>
                <div class="info-cell">
                    <img src="img/vectors-wrapper_1.svg" loading="lazy" alt="" class="image">
                    <div class="info"><span class="body-bold">*SL{intro-new-change-image}</span></div>
                </div>
            </section>
            <section class="bot-area wf-section">
                <div class="restore-button">
                    <div id="firstnext" class="button-small w-inline-block" style="display: none;">
                        <div class="button-text">*SL{intro-continue}</div><img src="img/arrowright.svg" loading="lazy" alt="">
                    </div>
                </div>
            </section>
        </div>

        <div class="screen-area create-2" id="step2" style="display: none;">
            <section class="top-area wf-section">
                <div class="logo-title steps">
                    <div id="backbtn">
                        <img src="img/vectors-wrapper_2.svg" loading="lazy" width="24" height="24" alt="" class="vectors-wrapper-7">
                    </div>
                    <div class="spixi-logo">
                        <img src="img/vectors-wrapper.svg" loading="lazy" width="45" height="56" alt="" class="vectors-wrapper">
                        <div class="title-logo">Spixi</div>
                    </div>
                </div>
                <div class="step-top">
                    <div class="step-id step-2">
                        <div class="caption-03">*SL{intro-step-2}</div>
                    </div>
                </div>
            </section>
            <section class="mid-area wf-section">
                <div class="headline-container">
                    <div class="headline">*SL{intro-new-description-3}</div>
                </div>
                <div class="input-group">
                    <div class="subtitle">*SL{intro-new-description-4}</div>
                    <div class="div-block-2">
                        <div class="inputs-password w-form">
                            <input type="password" class="input-master w-input" autofocus="true" maxlength="256" placeholder="*SL{intro-new-password}" id="password" oninput="checkPasswordMatch()">
                            <div id="passwordError" class="error-message" style="display: none">
                                <div>*SL{intro-new-password10}</div>
                            </div>
                        </div>
                        <div class="inputs-password w-form">
                            <input type="password" class="input-master w-input" autofocus="true" maxlength="256" placeholder="*SL{intro-new-password-2}" id="passwordConfirm" oninput="checkPasswordMatch()">
                            <div id="passwordError2" class="error-message" style="display: none">
                                <div>*SL{intro-new-passwordconf}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="info-cell">
                    <img src="img/vectors-wrapper_1.svg" loading="lazy" alt="" class="image">
                    <div class="info"><span class="body-bold">*SL{intro-new-description-5}</span></div>
                </div>
            </section>
            <section class="bot-area wf-section">
                <div class="restore-button">
                    <div id="secondnext" class="button-small w-inline-block" style="display: none;">
                        <div class="button-text">*SL{intro-continue}</div><img src="img/arrowright.svg" loading="lazy" alt="">
                    </div>
                </div>
            </section>
        </div>



        <div id="overlay" class="screen-area create-1" style="display: none;">
            <section class="top-area wf-section">
                <div class="logo-title restoring">
                    <div class="spixi-logo">
                        <img src="img/vectors-wrapper.svg" loading="lazy" width="45" height="56" alt="" class="vectors-wrapper">
                        <div class="title-logo">Spixi</div>
                    </div>
                </div>
            </section>
            <section class="mid-area restoring wf-section">
                <div class="headline-container restoring">
                    <div class="headline restoring">*SL{intro-new-create-title}</div>
                </div>
                <div class="loading-spinner"><img src="img/vectors-wrapper_3.svg" loading="lazy" width="48" height="48" alt="" class="vectors-wrapper-13"></div>
                <div class="info-cell">
                    <img src="img/vectors-wrapper_1.svg" loading="lazy" alt="" class="image">
                    <div class="info"><span class="body-bold">*SL{intro-new-create-description}</span></div>
                </div>
            </section>
            <section class="bot-area wf-section"></section>
        </div>

    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/webflow.js" type="text/javascript"></script>
    <script src="js/spixi.js"></script>
    <script type="text/javascript">
        var second_step = false;

        document.getElementById("backbtn").onclick = function () {
            if (second_step == true) {
                document.getElementById("step1").style.display = "block";
                document.getElementById("step2").style.display = "none";
                second_step = false;
            }
            else {
                location.href = "ixian:back";
            }
        }

        function onCheckStep1() {
            var firstnext = document.getElementById("firstnext");
            var dname = document.getElementById("nicknameInput").value;
            if (dname.length < 1) {
                firstnext.style.display = "none";
            }
            else {
                firstnext.style.display = "flex";
            }
        }

        document.getElementById("firstnext").onclick = function () {
            if (document.getElementById("firstnext").className.indexOf("disabled") == -1) {
                document.getElementById("step1").style.display = "none";
                document.getElementById("step2").style.display = "block";
                second_step = true;
            }

        }

        function checkPasswordMatch() {
            var password = $("#password").val();
            var confirmPassword = $("#passwordConfirm").val();
            var secondnext = document.getElementById("secondnext");
            secondnext.style.display = "none";
            document.getElementById("passwordError").style.display = "none";
            document.getElementById("passwordError2").style.display = "none";

            if (password.length < 10) {
                document.getElementById("passwordError").style.display = "block";
                return false;
            }

            if (confirmPassword.length < 1) {
                document.getElementById("passwordError2").style.display = "block";
                $("#passwordError2").html("*SL{intro-new-passwordconf}");

                return false;
            }

            if (password != confirmPassword) {
                document.getElementById("passwordError2").style.display = "block";
                $("#passwordError2").html("*SL{intro-new-passwordnomatch}");
                return false;
            }
            else {
                secondnext.style.display = "flex";

                return true;
            }
        }

        document.getElementById("secondnext").onclick = function () {

            if (document.getElementById("secondnext").classList.contains("disabled")) {
                return;
            }
            document.getElementById("step1").style.display = "none";
            document.getElementById("step2").style.display = "none";
            document.getElementById("overlay").style.display = "block";

            setTimeout(function () { createAccount(); }, 400);
        }

        function createAccount() {
            var nick = document.getElementById("nicknameInput").value;
            var pass = $("#password").val();

            // Check that the passwords are correct
            if (checkPasswordMatch() == false) {
                return;
            }

            location.href = "ixian:create:" + nick + ":" + pass;
        }

        document.getElementById("avatar").onclick = function () {
            location.href = "ixian:avatar";
        }

        function loadAvatar(avatar_path) {
            avatar_path = avatar_path.replace(/&#92;/g, '\\');
            document.getElementById("avatar").src = avatar_path + "?t=" + new Date().getTime();
        }
    </script>

</body>
</html>